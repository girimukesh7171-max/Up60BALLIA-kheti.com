<script>
    const chatArea = document.getElementById('chat-area');
    const input = document.getElementById('user-input');

    // Weather API Key (Agar hai to yahan dalein, varna offline kaam karega)
    const WEATHER_API_KEY = "YOUR_OPENWEATHERMAP_API_KEY_HERE"; 

    function addMessage(text, isUser = false) {
        const msg = document.createElement('div');
        msg.classList.add('message', isUser ? 'user' : 'bot');
        msg.innerHTML = text;
        chatArea.appendChild(msg);
        chatArea.scrollTop = chatArea.scrollHeight;
    }

    async function getWeather() {
        if (!WEATHER_API_KEY || WEATHER_API_KEY.includes("YOUR_")) {
            return "Mausam ke liye API key chahiye. Tab tak aap upar box mein di gayi basic info padh sakte hain.";
        }
        try {
            const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=Ballia,IN&appid=${WEATHER_API_KEY}&units=metric&lang=hi`);
            const data = await res.json();
            if (data.cod !== 200) return "Mausam fetch karne mein dikkat: " + data.message;
            return `Ballia ka tamman ${data.main.temp}Â°C hai aur aaj ${data.weather[0].description} hai.`;
        } catch (e) {
            return "Internet connectivity check karein.";
        }
    }

    async function getReply(question) {
        const q = question.toLowerCase();
        if (q.includes("mausam") || q.includes("barish")) return await getWeather();
        if (q.includes("dhan")) return "Dhan (Kharif): June-July mein boai karein. Ballia ke nichle ilakon ke liye achha hai.";
        if (q.includes("gehu")) return "Gehu (Rabi): November mein boai shuru karein. Ballia ki mitti iske liye best hai.";
        if (q.includes("kam barish")) return "Kam barish mein Sarson ya Chana lagana behtar hai.";
        
        return "Mujhe samajh nahi aaya. Kripya 'Dhan', 'Gehu' ya 'Mausam' likh kar puchhein.";
    }

    async function sendMessage() {
        const text = input.value.trim();
        if (!text) return;

        addMessage(text, true); // User ka message dikhayein
        input.value = "";

        const reply = await getReply(text); // Bot ka jawab lein
        addMessage(reply, false); // Bot ka jawab dikhayein
    }
</script>
